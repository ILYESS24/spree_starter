#!/bin/bash
# Wrapper pour Rails qui évite le segfault de Ruby 3.3.0 sur Koyeb
# en désactivant les shapes de Ruby via variable d'environnement

# Désactiver les shapes de Ruby pour éviter le segfault
export RUBY_SHAPE_CACHE_DISABLE=1
export RUBYOPT="${RUBYOPT} --disable-shape-cache"

# Exécuter Rails normalement
exec /usr/local/bin/ruby "$@"

